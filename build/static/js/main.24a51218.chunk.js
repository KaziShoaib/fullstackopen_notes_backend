(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),o=n(18),i=n.n(o),u=n(9),s=n(4),l=n.n(s),j=n(6),d=n(3),b=(n(5),function(e){var t=e.note,n=e.toggleImportance,r=t.important?"make not important":"make important";return Object(c.jsxs)("li",{className:"note",children:[Object(c.jsx)("span",{children:t.content}),Object(c.jsx)("button",{onClick:n,children:r})]})}),f=n(7),p=n.n(f),O="/api/notes",h=null,g={getAll:function(){return p.a.get(O).then((function(e){return e.data}))},create:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,p.a.post(O,t,n);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return p.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){h="bearer ".concat(e)}},m={login:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){return Object(c.jsx)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:Object(c.jsx)("em",{children:"Created by Kazi Shoaib Muhammad"})})},x=function(e){var t=e.message;return null===t?null:Object(c.jsx)("div",{className:"error",children:t})},w=function(e){var t=e.handleLogin,n=Object(r.useState)(""),a=Object(d.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(""),s=Object(d.a)(u,2),l=s[0],j=s[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Log In"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({username:o,password:l}),i(""),j("")},children:[Object(c.jsxs)("div",{children:["username:",Object(c.jsx)("input",{type:"text",name:"Username",id:"username",value:o,onChange:function(e){i(e.target.value)}})]}),Object(c.jsxs)("div",{children:["password:",Object(c.jsx)("input",{type:"password",name:"Password",id:"password",value:l,onChange:function(e){j(e.target.value)}})]}),Object(c.jsx)("button",{id:"login-button",type:"submit",children:"Log in"})]})]})},S=a.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(d.a)(n,2),o=a[0],i=a[1],u={display:o?"none":""},s={display:o?"":"none"},l=function(){i(!o)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:u,children:Object(c.jsx)("button",{onClick:l,children:e.buttonLabel})}),Object(c.jsxs)("div",{style:s,className:"togglableContent",children:[e.children,Object(c.jsx)("button",{onClick:l,children:"cancel"})]})]})}));S.displayName="Togglable";var k=S,y=function(e){var t=e.addNote,n=Object(r.useState)(""),a=Object(d.a)(n,2),o=a[0],i=a[1];return Object(c.jsxs)("div",{className:"formDiv",children:[Object(c.jsx)("h2",{children:"Create a new note"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:o,important:!1}),i("")},children:[Object(c.jsx)("input",{id:"new-note-input",value:o,onChange:function(e){i(e.target.value)}}),Object(c.jsx)("button",{type:"submit",children:"Save"})]})]})},N=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!0),i=Object(d.a)(o,2),s=i[0],f=i[1],p=Object(r.useState)(null),O=Object(d.a)(p,2),h=O[0],S=O[1],N=Object(r.useState)(null),C=Object(d.a)(N,2),I=C[0],T=C[1],L=Object(r.useRef)();Object(r.useEffect)((function(){g.getAll().then((function(e){return a(e)}))}),[]),console.log("render ",n.length,"notes"),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);T(t),g.setToken(t.token)}}),[]);var A=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),g.setToken(n.token),T(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),S("invalid credential"),setTimeout((function(){S(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e){L.current.toggleVisibility(),g.create(e).then((function(e){a(n.concat(e))})).catch((function(e){S(e.response.data.error),setTimeout((function(){S(null)}),5e3)}))},J=s?n:n.filter((function(e){return!0===e.important}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"NOTES"}),Object(c.jsx)(x,{message:h}),null===I?Object(c.jsx)(k,{buttonLabel:"login",children:Object(c.jsx)(w,{handleLogin:A})}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:[I.name," logged in"]}),Object(c.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteappUser"),g.setToken(null),T(null)},children:"Log Out"}),Object(c.jsx)(k,{buttonLabel:"add new note",ref:L,children:Object(c.jsx)(y,{addNote:E})})]}),Object(c.jsx)("div",{children:Object(c.jsxs)("button",{onClick:function(){return f(!s)},children:["Show ",s?"Important":"All"]})}),Object(c.jsx)("ul",{children:J.map((function(e){return Object(c.jsx)(b,{note:e,toggleImportance:function(){!function(e){var t=n.find((function(t){return t.id===e})),c=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});g.update(e,c).then((function(t){a(n.map((function(n){return n.id!==e?n:t})))})).catch((function(c){S("the note '".concat(t.content,"' has been deleted")),console.log(c),setTimeout((function(){S(null)}),5e3),a(n.filter((function(t){return t.id!==e})))}))}(e.id)}},e.id)}))}),Object(c.jsx)(v,{})]})};i.a.render(Object(c.jsx)(N,{}),document.getElementById("root"))},5:function(e,t,n){}},[[42,1,2]]]);
//# sourceMappingURL=main.24a51218.chunk.js.map